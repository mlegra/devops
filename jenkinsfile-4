/*properties([
    parameters([
        string(name: 'countTotal', defaultValue: '3')
    ])
])

def stages = [failFast: true]
for (int i = 0; i < params.countTotal.toInteger(); i++) {
    def scNumber = i //alias the loop variable to refer it in the closure
    stages["deploySC ${scNumber}"] = {
        stage("deployVM ${scNumber}") {
            sh "echo p1; sleep 12s; echo phase${scNumber}"
            build job: 'job-2'
        }
    }
}

node() {
    parallel stages
}
*/
pipeline {
    agent any
    stages {
        stage('Copy') {
            steps {
		for (int i = 0; i < params.countTotal.toInteger(); i++) {
    def scNumber = i //alias the loop variable to refer it in the closure
     ${scNumber} : {
        
            build job: 'job-2'
        }
    }
}

	
       }
  }
}
	
